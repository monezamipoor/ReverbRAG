seed: 42

run:
  model: avnerf                # {neraf | avnerf}
  database: raf               # {raf | soundspaces}
  scene: FurnishedRoom        # e.g., EmptyRoom, FurnishedRoom
  reverbrag: false           # {true | false}
  sample_rate: 48000
  epochs: 100
  edc_loss: 0.0               # weight for EDC loss; 0.0 to disable EDC training

  # NEW â€“ checkpointing & resume
  save_root: ./checkpoints          # root for run folders
  save_every: 10              # save every N epochs
  resume:
    checkpoint: null        # e.g., ./runs/raf/FurnishedRoom/20251106-2130_base/epoch_50.pt
    load_optimizer: false     # if true, restore optimizer state (and LR scheduler progress)
    lr_override: null         # e.g., 1e-4; if set, forces this LR after resume

renders:
  save_renders: ./renders   # set to null to disable
  model: ./checkpoints/20251110-2341_base/epoch_60.pt  # path to trained model; set to null to use latest checkpoint from run

  # logging
  log_every: 50               # iterations

sampler:
  batch_size: 2048         # Normal batch size (Not EDC mode)
  rirs_per_batch: 40       # only for EDC mode
  shuffle: true
  num_workers: 8

wandb:
  project: ReverbRAG
  api_key: null    # optional; leave null if you've already `wandb login`


databases:
  raf:
    root: ../NeRAF/data/RAF
  soundspaces:
    root: /data/SoundSpaces

reverbrag:
  fusion: concat         # {film | concat | input}
  k: 1                      # we only use top-1 here
  num_bands: 32             # features are [32 x 4]
  gating: true              # enable scalar gate

  # reference MLP over 32x4 features
  mlp_hidden: [128, 256, 256]
  mlp_act: lrelu             # {gelu | relu | lrelu | silu}
  feature_norm: "layernorm"

  # FiLM parameters
  film_strength: 0.3        # near-identity at init
  learnable_film: true      # make scales learnable (recommended)